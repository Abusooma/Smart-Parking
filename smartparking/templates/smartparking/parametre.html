{% extends 'dashboard/main.html' %}

{% load static %}

{% block title %} Paramètres {% endblock %}
{% block content %} 

      <div class="container-fluid dashboard-content">
        <h2 class="mb-4">Paramètres du profil</h2>
        
        <div class="row justify-content-center">
          <div class="col-md-8">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Gestion du profil</h5>
                <form>
                  <!-- Changement de mot de passe -->
                  <div class="form-group">
                    <label for="currentPassword">Mot de passe actuel</label>
                    <input type="password" class="form-control" id="currentPassword" required>
                  </div>
                  <div class="form-group">
                    <label for="newPassword">Nouveau mot de passe</label>
                    <input type="password" class="form-control" id="newPassword" required>
                  </div>
                  <div class="form-group">
                    <label for="confirmPassword">Confirmer le nouveau mot de passe</label>
                    <input type="password" class="form-control" id="confirmPassword" required>
                  </div>
                  <button type="submit" class="btn btn-primary mb-4">Changer le mot de passe</button>

                  <hr>

                  <!-- Double authentification -->
                  <div class="form-group mt-4">
                    <h6>Double authentification</h6>
                    <div class="custom-control custom-switch">
                      <input type="checkbox" class="custom-control-input" id="twoFactor">
                      <label class="custom-control-label" for="twoFactor">Activer la double authentification</label>
                    </div>
                  </div>
                  <div id="twoFactorSetup" style="display: none;">
                    <p>Pour activer la double authentification, suivez ces étapes :</p>
                    <ol>
                      <li>Scannez le QR code ci-dessous avec une application d'authentification (comme Google Authenticator).</li>
                      <li>Entrez le code à 6 chiffres généré par l'application.</li>
                    </ol>
                    <div class="text-center mb-3">
                      <img src="{% static 'img/code_qr.png' %}" alt="QR Code pour la double authentification" class="img-fluid">
                    </div>
                    <div class="form-group">
                      <label for="verificationCode">Code de vérification</label>
                      <input type="text" class="form-control" id="verificationCode" placeholder="Entrez le code à 6 chiffres">
                    </div>
                    <button type="button" class="btn btn-success">Vérifier et activer</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
{% endblock %}
{% block extra_script %}  
<script>
    $(document).ready(function () {
      $('#sidebarCollapse').on('click', function () {
        $('#sidebar').toggleClass('active');
      });

      $('#twoFactor').on('change', function() {
        if(this.checked) {
          $('#twoFactorSetup').show();
        } else {
          $('#twoFactorSetup').hide();
        }
      });
    });
  </script>
{% endblock %}